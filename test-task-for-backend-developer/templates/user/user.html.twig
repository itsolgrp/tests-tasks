{% extends "menu/menu_links.html.twig" %}

{% block mainContent %}
    <div class="info-block shadow">
        <h5 class="info-box-title"> Töötajad </h5>
        <div class="table-responsive">
            <table class="table">
                    <thead>
                        <tr>
                        <th scope="col">Kood</th>
                        <th scope="col">Nimi</th>
                        <th scope="col">Kasutajanimi</th>
                        <th scope="col">Amet</th>
                        <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for user in users %}
                            <tr>
                                <td>{{ user.code }}</td>
                                <td>{{ user.name }} {{ user.lastname }}</td>
                                <td>{{ user.username }}</td>
                                <td>{{ user.position }}</td>
                                <td>
                                    <div class="d-flex float-right">
                                        <a href="{{ path('user_show', {id: user.id}) }}" class="btn btn-info ml-2"><i class="fas fa-question-circle"></i></a>
                                        <a href="{{ path('user_edit', {id: user.id}) }}" class="btn btn-success ml-2"><i class="fas fa-pencil-alt"></i></a>
                                        <form method="post" action="{{ path('user_delete', {'id': user.id }) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
                                            <input type="hidden" name="_method" value="DELETE">
                                            <input type="hidden" name="_token" value="{{ csrf_token('delete-user') }}">
                                            <button class="btn btn-danger ml-2"><i class="fas fa-trash"></i></button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
            </table>
        </div>  
        <a href="{{ path('user_new') }}" class="btn btn-primary btn-lg"> Lisa </a>

        {% for message in app.flashes('success') %}
            <div class="alert alert-success mt-3">
                {{ message }}
            </div>
        {% endfor %}
    </div>

{% endblock %}